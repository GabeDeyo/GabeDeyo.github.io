<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Lerp</title>

    <meta name="viewport" content="width=device-width,initial-scale=1.0, shrink-to-fit=no" />

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/page.css">
</head>

<body>

    <!-- Top Navigation -->
    <header>
        <nav class="navbar navbar-inverse">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#collapsemenu" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a href="../index.html" class="navbar-brand">Personal Notes</a>
                </div>

                <div class="collapse navbar-collapse" id="collapsemenu">
                    <ul class="nav navbar-nav">

                        <!-- GAME DEVELOMENT -->
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Game Development <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <!-- CONCEPTS -->
                                <li><a href="concepts.html">Concepts <span class="glyphicon-chevron-right"></span></a></li>

                                <!-- ENGINE -->
                                <li><a href="engine.html">Engine <span class="glyphicon-chevron-right"></span></a></li>

                                <!-- IMPLEMENTATIONS -->
                                <li><a href="implementations.html">Implementations <span class="glyphicon-chevron-right"></span></a></li>
                            </ul>
                        </li>

                        <!-- GABE DEVELOPMENT -->
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Gabe Development <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <!-- FITNESS PAGE -->
                                <li><a href="../gabe/fitness.html">Fitness <span class="glyphicon-chevron-right"></span></a></li>

                                <!-- STYLE & GROOMING PAGE -->
                                <li><a href="../gabe/style.html">Style <span class="glyphicon-chevron-right"></span></a></li>

                                <!-- FINANCE PAGE -->
                                <li><a href="../gabe/finance.html">Finance <span class="glyphicon-chevron-right"></span></a></li>

                                <!-- PHILOSOPHY PAGE -->
                                <li><a href="../gabe/philosophy.html">Philosophy <span class="glyphicon-chevron-right"></span></a></li>
                            </ul>
                        </li>

                    </ul>
                </div>

            </div>
        </nav>
    </header>

    <!-------------------------------------------------------------------------->

    <!-- MAIN -->
    <main>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1 id="title">Become a Pro at Lerp</h1>

                    <aside>
                        <button type="button" class="btn btn-default" name="button" id="selectAll">Select All</button>
                        <button type="button" class="btn btn-default" name="button" id="clearAll">Clear All</button>
                    </aside>

                    <div class="jumbotron heliList">
                        <h2>Index</h2>
                        <ul>
                            <li><p><span class="glyphicon-remove"></span>
                                <a href="#introduction">Introduction</a>
                                </p>
                            </li>
                            <li><p><span class="glyphicon-remove"></span>
                                <a href="#lerp-everything">Lerp Everything</a>
                                </p>
                            </li>
                            <li><p><span class="glyphicon-remove"></span>
                                <a href="#beyond-lerp">Beyond Lerp</a>
                                </p>
                            </li>
                            <li><p><span class="glyphicon-remove"></span>
                                <a href="#smoothstep">Smoothstep</a>
                                </p>
                            </li>
                            <li><p><span class="glyphicon-remove"></span>
                                <a href="#make-it-breathe">Make it Breathe</a>
                                </p>
                            </li>
                            <li><p><span class="glyphicon-remove"></span>
                                <a href="#conclusion">Conclusion</a>
                                </p>
                            </li>
                        </ul>
                    </div>

<div class="jumbotron col-md-12 heliList" id="introduction">
    <h2>Introduction</h2>
    <ul>
        <li><p><span class="glyphicon-remove"></span>
            We see this sort of implementation far too often. 
            <pre>
            <span class="glyphicon-remove"></span>transformation.position = Vector3.Lerp(startPos, endPos, Time.deltaTime);
            </pre>
            <p><span class="glyphicon-remove"></span>The person posting it is usually convinced that Vector3.Lerp is "broken", but the real problem is that they are using it incorrectly.</p>
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            Lerp, short for "linear interpolation" does one very simple thing: given two values, <i>x</i> and <i>y</i>, it returns a value that is <i>t</i> percent between them. If you expect the output to change, the arguments you pass in need to reflect that!
            <p><span class="glyphicon-remove"></span>In the example above, it doesn't make sense to just pass in Time.deltatime, because that's only the time that passed during the most recent frame. If your game is running at a constant 50fps, that's always going to be 0.02.</p>
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            We'll get better results if we let that timer accumulate over multiple frames. Something like this should get the point across:
            <pre>
            <span class="glyphicon-remove"></span>public class LerpExample : MonoBehavior {
                float lerpTime = 1f;
                float currentLerpTime;

                float moveDistance = 10f;

                Vector3 startPos;
                Vector3 endPos;

                protected void Start(){
                    startPos = transform.position;
                    endPos = transform.position + transform.up * moveDistance;
                }

                protected void Update() {
                    //reset when we press spacebar
                    if(Input.GetKeyDown(KeyCode.Space)) {
                        currentLerpTime = 0f;
                    }

                    //increment timer once per frame
                    currentLerpTime += Time.deltaTime;
                    if(currentLerpTime > lerpTime)
                        currentLerpTime = lerpTime;

                    //Lerp
                    float perc = currentLerpTime / lerpTime;
                    transform.position = Vector3.Lerp(startPos, endPos, perc);
                }
            }
            </pre>
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            You could create an empty scene, drop in a cube, attach this script, and see it in action. The variable <i>perc</i> is used where Time.deltaTime used to be. What is <i>perc</i>? It's a number between 0 and 1, representing our progress through the Lerp. If you're curious, check the result if you change lerpTime or moveDistance.
        </p></li>
    </ul>
    <a href="#title"><span class="glyphicon-menu-up"></span></a>
</div>

<div class="jumbotron col-md-12 heliList" id="lerp-everything">
    <h2>Lerp Everything</h2>
    <ul>
        <li><p><span class="glyphicon-remove"></span>
            Unity provides helper funcitons for interpolating many different values.
            <br> &nbsp; &bull; Mathf.Lerp
            <br> &nbsp; &bull; Vector3.Lerp
            <br> &nbsp; &bull; Color.Lerp
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            At the end of the day, though, Mathf.Lerp is all you need; the others are just convenience methods on top of that. It's easy enough to write your own Lerp function for any class or data you might need to interpolate. In the specific case of quaternions, which Unity uses to represent rotation, there's even a Slerp or "Spherical Lerp".
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            Any time you have two values, and you'd like to smoothly transition between them, interpolation can be your friend.
        </p></li>
    </ul>
    <a href="#title"><span class="glyphicon-menu-up"></span></a>
</div>

<div class="jumbotron col-md-12 heliList" id="beyond-lerp">
    <h2>Beyond Lerp</h2>
    <ul>
        <li><p><span class="glyphicon-remove"></span>
            What if we passed Lerp a <i>t</i> that wasn't just a straight percentage? What if, instead of a straight line graphed between two points, we wanted some sort of curve? Our input must remain between 0 and 1, but there are many functions that accomplish that.
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            For example, we could <b>"ease out"</b> with sinerp:
            <pre>
            <span class="glyphicon-remove"></span>//Graph looks linear until starting to plateau around 50% through.
            float t = currentLerpTime / lerpTime;
            t = Mathf.Sin(t * Mathf.PI * 0.5f);
            </pre>
            <p><span class="glyphicon-remove"></span>Or we could <b>"ease in"</b> with coserp:</p>
            <pre>
            <span class="glyphicon-remove"></span>//Graph looks to come out of a plateau and then move linearly around 50%
            t = 1f - Mathf.Cos(t * Mathf.PI * 0.5f);
            </pre>
            <p><span class="glyphicon-remove"></span>We could even create exponential (quadratic) movement:</p>
            <pre>
            <span class="glyphicon-remove"></span>//Graph grows exponentially
            t = t * t;
            </pre>
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            Multiplying t by itself has an interesting quirk: so long as t is between 0 and 1, multiplying t by itself any number of times will always produce a number that is also between 0 and 1.
        </p></li>
    </ul>
    <a href="#title"><span class="glyphicon-menu-up"></span></a>
</div>

<div class="jumbotron col-md-12 heliList" id="smoothstep">
    <h2>Smoothstep</h2>
    <ul>
        <li><p><span class="glyphicon-remove"></span>
            The multiplication property mentioned above is the core concept behind some interpolation methods which ease in <i>and</i> ease out, ush as the famous "smoothstep" formula
            <pre>
            <span class="glyphicon-remove"></span>t = t*t * (3f - 2f*t)
            </pre>
            <p><span class="glyphicon-remove"></span>Or many peoples favorites, "smootherstep":</p>
            <pre>
            <span class="glyphicon-remove"></span>t = t*t*t * (t * (6f*t - 15f) + 10f)
            </pre>
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            Many of these extra formulas I've mentioned aren't included with Unity, but that just gives you the freedom to use any function you can find or create.
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            XXX
        </p></li>
    </ul>
    <a href="#title"><span class="glyphicon-menu-up"></span></a>
</div>

<div class="jumbotron col-md-12 heliList" id="make-it-breathe">
    <h2>Make it Breathe</h2>
    <ul>
        <li><p><span class="glyphicon-remove"></span>
            What about a Lerp that <i>never ends?</i>. Robert Yang once said, "sometimes I wish I could animate every single thing in my game with a sine wave."
            <p><span class="glyphicon-remove"></span>Some games introduce a slight "head bob" while the player is running. Other games need a gentle bob for the main menu camera. I've seen lights that "snore", fading in and out. Whatever the case, I just want to point out how fantastically useful wave functions can be - their input domain is infinite, so they never have to end, and their output range is both narrow and constant, so the're easy to control</p>
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            For example, this script makes an object slowly move up and down, according to a sin wave:
            <pre>
            <span class="glyphicon-remove"></span>public class BreatheSimple : MonoBehavior {
                Vector3 startPos;

                protected void Start() {
                    startPos = transform.position;
                }

                protected void Update() {
                    float distance = Mathf.Sin(Time.timeSinceLevelLoad);
                    transfrom.position = startPos + Vector3.up * distance;
                }
            }
            </pre>
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            Adjusting the sine wave gives us more control:
            <pre>
            <span class="glyphicon-remove"></span>public class Breathe : MonoBehavior {
                Vector3 startPos;

                public float amplitude = 10f;
                public float period = 5f;

                protected void Start() {
                    startPos = transform.position;
                }

                protected void Update() {
                    float theta = Time.timeSinceLevelLoad / period;
                    float distance = amplitude * Mathf.Sin(theta);
                    transform.position = startPos + Vector3.up * distance;
                }
            }
            </pre>
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            <b>Amplitude</b> controls how far the object moves; <b>period</b> controls how quickly it does so.
            <p><span class="glyphicon-remove"></span>A player's head bob might call for small amplitude and a short period. A menu camera's slow breathing might call for an extremely long period, or movement on multiple axes at varying rates. As long as you can sort out the math, you can get whatever behavior you want.</p>
            <p><span class="glyphicon-remove"></span>What happens if you take only the absolute value of the sine wave? <i>Upward-only bouncing.</i> What happens if you clamp the sine wave's output between 0.6 and 1? Would you get a sort of "throb" motion? Could that be useful to scale an alert in your UI? If you want to get really fancy, you could even use an animation curve to manage your Lerp params.</p>
        </p></li>
    </ul>
    <a href="#title"><span class="glyphicon-menu-up"></span></a>
</div>

<div class="jumbotron col-md-12 heliList" id="conclusion">
    <h2>Conclusion</h2>
    <ul>
        <li><p><span class="glyphicon-remove"></span>
            Lerp is an easy and <i>powerful</i> function with many applications.
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            One of the first games I ever worked on used a camera manager that interpolates between various zooms and positions. But there is so many more applications Lerp can be used for it is insane. This is one of those hammers that turns up more and more often, once you know how to use it.
        </p></li>
    </ul>
    <a href="#title"><span class="glyphicon-menu-up"></span></a>
</div>

                    <!-------------------------------------->
                </div>
            </div>
    </main>

    <!-------------------------------------------------------------------------->

    <!-- FOOTER -->
    <footer class="navbar navbar-inverse navbar-fixed-bottom">
        <nav>
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-sm-6 col-xs-12">
                        <ul>
                            <li>&copy; 2017 <a href="http://www.gabedeyo.com">Gabe Deyo</a></li>
                            <li>|</li>
                            <li><a href="mailto:gabedeyo@gmail.com?subject=Notes">gabedeyo@gmail.com</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    </footer>

    <!-- Latest Minified Slim JQuery -->
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha256-/SIrNqv8h6QGKDuNoLGA4iret+kyesCkHGzVUUV0shc=" crossorigin="anonymous"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <script src="../js/selection.js" charset="utf-8"></script>
</body>

</html>

<!-- Section Template

<div class="jumbotron col-md-12 heliList" id="">
    <h2>XXX</h2>
    <ul>
        <li><p><span class="glyphicon-remove"></span>
            XXX
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            XXX
        </p></li>
        <li><p><span class="glyphicon-remove"></span>
            XXX
        </p></li>
    </ul>
    <a href="#title"><span class="glyphicon-menu-up"></span></a>
</div>

-->
